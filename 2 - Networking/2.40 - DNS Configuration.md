---
Company: CompTIA
Course: A+
Teacher: Professor Messer
Exam Code: 220-1201
Difficulty: Easy
Topic: DNS Configuration
URL: https://www.youtube.com/watch?v=lAHqO9sDVy4&list=PLG49S3nxzAnnes8ZGI-OBlKEukHCX46N8&index=11
---
## [[2.11 - Common Ports#DNS - Domain Name System|DNS]] Configuration

#### Domain Name System (DNS)

1. **Purpose:** Translates human-readable domain names into computer-readable [[2.10 - Introduction to IP#IP - Internet Protocol|IP]] addresses.
    
    - Example: `www.google.com` → `142.250.190.68` (IP address used by devices to communicate).
        
2. **Hierarchical Structure:** DNS is organized in levels:
    
    - **Root** → **Top-Level Domain (TLD)** → **Second-Level Domain** → **Subdomain/Host**
        
3. **Distributed Database:**
    
    - Multiple DNS servers handle queries.
        
    - **13 logical root server clusters** worldwide (each with many physical servers).
        
    - Hundreds of generic TLDs: `.com`, `.org`, `.net`, `.edu`, etc.
        
    - Over 275 country code TLDs: `.us`, `.ca`, `.uk`, `.gr`, etc.
        
------------
#### DNS Hierarchy Diagram
```
        .
        |
  ----------------------------
  |        |       |         |
 .com     .net    .edu      .org
  |
 google.com
  |
  ---------------------
  |        |          |
 www      mail       imghp

```
- **Root (`.`)**: Top of the hierarchy.
    
- **TLDs**: Generic (.com, .org) or country-specific (.uk, .gr).
    
- **Second-Level Domain**: Domain owned/registered (e.g., `google` in `google.com`).
    
- **Subdomain / Host**: Specific services or hosts (e.g., `www`, `mail`, `imghp`).
-------------
#### [[2.11 - Common Ports#DNS - Domain Name system|DNS]] Lookup
1. **dig** command for DNS lookup
	- Available in macOS, Linux and some versions of Windows.
	- Alternative in Windows is **ns lookup** 
	- Not the same detail 
-----------
#### [[2.11 - Common Ports#DNS - Domain Name system|DNS]] records
1. Resource records
	- The database records of domain name services
2. Over 30 record types 
	- [[2.10 - Introduction to IP|IP]] addresses, certificates, host alias names, etc.
3. These are <span style="color:red">important</span> and <span style="color:red">critical</span> configurations
	- Make sure to test your settings and backup
---
#### Address records (A) (AAAA)
1. Defines the [[2.10 - Introduction to IP|IP]] address of a host 
	- This is the most popular Query
2. A records are for IPv4 addresses 
	- Modify the A record to change the host name to IP address resolution 
3. AAAA are for IPv6 addresses
	- The same [[2.30 - Network Services#2.11 - Common Ports DNS - Domain Name system DNS server|DNS server]] different records

#### Canonical name records (CNAME)
1. A name is an alias of another, canonical name
	- One physical server, multiple services
	- ftp, mail, www lead to the same server but with different name.
	- Advantage: making a change in DNS configuration will affect all aliases
```
; Alias (canonical) names
	chat           IN CNAME            www.example.com 
	ftp           IN CNAME            www.example.com
	www           IN CNAME            www.example.com
```
---
#### Mail exchange record (MX)
1. Determines the host name for the host server
	- This isn't an IP address, its a name
	- Makes sure you are able to send and receive emails messages from your domain

```
IN      MX     mail.example.com

; A List of machine names and addresses
mail.example.com     IN    A    54.34.23.234    ;mail server 
```
---
#### Text records
1. Human-readable text information
	- Useful public information
	- Was originally designed for informal information
2. Can be used for verification processes
	- If you have access to the DNS, then you must be the administrator of the domain name
3. Commonly used for email security
	- External email servers validate information from your DNS 
	- To see TXT records in a server type command:
```
dig www.example.com txt
```
or
```
nslookup -type=txt www.example.com
```
---
#### Domain Keys Identified Mail (DKIM)
1. Digitally sign a domain's outgoing mail
	- Validated by mail servers, not usually seen by the end user
	- The public key is in the DKIM record
---
#### Sender Policy Framework
1. SPF protocol
	- A list of all servers authorized to send emails for this domain
	- Prevent mail spoofing
	- Mail servers perform a check to see if incoming mail really did come from an authorized host
```
;SPF TXT records
example.com     300   IN   TXT   "v=spf1 include: maingun.org ~all" 
```
---
#### DMARC 
1. Domain-based message Authentication, Reporting and Confermance (DMARC)
	- Prevent unauthorized email use (spoofing)
	- An extension of SPF and DKIM
	- Performs check with SPF that it came from a trusted server
	- Performs digital signature using the public key located in the DKIM record
2. You decide what external servers should do with emails that don't validate through SPF or DKIM
	- That policy is written in DMARC TXT record 
	- Accept all, send to spam or reject the email
	- Compliance reports can be sent to the email administrator